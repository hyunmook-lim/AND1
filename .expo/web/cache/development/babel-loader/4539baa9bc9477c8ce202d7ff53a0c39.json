{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useRef, useState, useEffect } from \"react\";\nimport styled from \"styled-components/native\";\nimport { useDispatch } from \"react-redux\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { signup, signupName } from \"../data/firebase\";\nimport { ProgressAction } from \"../actions/ProgressAction\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar width = Dimensions.get(\"window\").width;\nvar height = Dimensions.get(\"window\").height;\nvar Container = styled.SafeAreaView(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n  align-items: center;\\n  justify-content: center;\\n  background-color: \", \";\\n\"])), function (_ref) {\n  var theme = _ref.theme;\n  return theme.background;\n});\nvar ScrollContainer = styled.ScrollView(_templateObject2 || (_templateObject2 = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n  width: 100%;\\n\"])));\nvar MiddleContainer = styled.View(_templateObject3 || (_templateObject3 = _taggedTemplateLiteralLoose([\"\\n  width: \", \"px\\n  justify-content: center;\\n  align-items: center;\\n  margin: 3px;\\n  margin-bottom: 5px\\n\"])), width);\nvar TextArea = styled.View(_templateObject4 || (_templateObject4 = _taggedTemplateLiteralLoose([\"\\n  justify-content: center;\\n  align-items: center;\\n  width: 80%\\n  height: 50px;\\n  padding-left: 10px\\n\"])));\nvar Text = styled.Text(_templateObject5 || (_templateObject5 = _taggedTemplateLiteralLoose([\"\\n  align-self: flex-start\\n  font-size: 18px;\\n  color: \", \";\\n\"])), function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.grayText;\n});\nvar InputArea = styled.View(_templateObject6 || (_templateObject6 = _taggedTemplateLiteralLoose([\"\\n  width: 80%;\\n  height: 50px;\\n  background-color: \", \";\\n  opacity: 0.7\\n  align-items: flex-start;\\n  justify-content: center;\\n  border-radius: 12px;\\n\"])), function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.emailPWInput;\n});\nvar Input = styled.TextInput(_templateObject7 || (_templateObject7 = _taggedTemplateLiteralLoose([\"\\n  color: black;\\n  font-size: 15px;\\n  height: 50px;\\n  padding-left: 15px;\\n  padding-right: 15px;\\n  width: 100%;\\n\"])));\nvar SignupButtonText = styled.Text(_templateObject8 || (_templateObject8 = _taggedTemplateLiteralLoose([\"\\n  font-size: \", \"\\n  font-weight: bold\\n  color: \", \";\\n\"])), function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.buttonTextSize;\n}, function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.normalText;\n});\nvar ErrorMessageText = styled.Text(_templateObject9 || (_templateObject9 = _taggedTemplateLiteralLoose([\"\\n  align-self: flex-start;\\n  color: red;\\n  font-size: \", \";\\n\"])), function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.normalTextSize;\n});\nexport default function Singup(_ref7) {\n  var navigation = _ref7.navigation;\n  var dispatch = useDispatch();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      rePassWord = _useState8[0],\n      setRePassWord = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      disabled = _useState10[0],\n      setDisabled = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errorMessage = _useState12[0],\n      setErrorMessage = _useState12[1];\n\n  var nameRef = useRef();\n  var emailRef = useRef();\n  var passwordRef = useRef();\n  var rePasswordRef = useRef();\n  useEffect(function () {\n    var _errorMessage = \"\";\n\n    if (!name) {\n      _errorMessage = \"이름을 입력하세요\";\n    } else if (!email) {\n      _errorMessage = \"이메일을 입력하세요\";\n    } else if (!password) {\n      _errorMessage = \"비밀번호를 입력하세요\";\n    } else if (password.length < 6) {\n      _errorMessage = \"비밀번호를 6자리 이상 입력하세요\";\n    } else if (password !== rePassWord) {\n      _errorMessage = \"비밀번호가 일치하지 않습니다\";\n    } else {\n      _errorMessage = null;\n    }\n\n    setErrorMessage(_errorMessage);\n  }, [name, email, password, rePassWord]);\n  useEffect(function () {\n    setDisabled(!(name && email && password && rePassWord && !errorMessage));\n  }, [name, email, password, rePassWord, errorMessage]);\n\n  function AlertSignup() {\n    Alert.alert(\"알림\", \"해당 정보로 회원가입 하시겠습니까?\", [{\n      text: \"아니요\"\n    }, {\n      text: \"네\",\n      onPress: _Signup\n    }], {\n      cancelable: true,\n      onDismiss: function onDismiss() {\n        return Alert.alert(\"This alert was dismissed by tapping outside of the alert dialog.\");\n      }\n    });\n  }\n\n  function _Signup() {\n    var user;\n    return _regeneratorRuntime.async(function _Signup$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            dispatch(ProgressAction(true));\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(signup(email, password, name));\n\n          case 4:\n            user = _context.sent;\n            console.log(\"Signup page: signup button clicked\");\n            navigation.navigate(\"EmailLogin\");\n            dispatch(ProgressAction(false));\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            dispatch(ProgressAction(false));\n\n            if (_context.t0.message == \"Firebase: Error (auth/email-already-in-use).\") {\n              Alert.alert(\"이메일 오류\", \"\\uC774\\uBBF8 \\uAC00\\uC785\\uB41C \\uC774\\uBA54\\uC77C\\uC785\\uB2C8\\uB2E4\\n\\uB2E4\\uB978 \\uC774\\uBA54\\uC77C\\uC73C\\uB85C \\uB4F1\\uB85D\\uD574 \\uC8FC\\uC2DC\\uAE38 \\uBC14\\uB78D\\uB2C8\\uB2E4\");\n              console.log(\"Signup page: signup failed reason: \" + _context.t0.message);\n            } else {\n              Alert.alert(\"정보를 올바르게 입력해주세요\");\n              console.log(\"Signup page: signup failed reason: \" + _context.t0.message);\n            }\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  }\n\n  var SignupButtonContainer = styled.View(_templateObject10 || (_templateObject10 = _taggedTemplateLiteralLoose([\"\\n    width: \", \"px;\\n    justify-content: center;\\n    align-items: center;\\n    margin-top: \", \"px;\\n    margin-bottom: 15px;\\n  \"])), width, disabled ? height * 0.049 : height * 0.12);\n  var SignupButton = styled.TouchableOpacity(_templateObject11 || (_templateObject11 = _taggedTemplateLiteralLoose([\"\\n    justify-content: center;\\n    align-items: center;\\n    width: 170px;\\n    height: 50px;\\n    background-color: \", \";\\n    border-radius: 12px;\\n    opacity: \", \";\\n  \"])), function (_ref8) {\n    var theme = _ref8.theme;\n    return theme.button;\n  }, disabled ? \"0.25\" : \"1\");\n  return _jsx(Container, {\n    children: _jsxs(ScrollContainer, {\n      children: [_jsxs(MiddleContainer, {\n        style: {\n          marginTop: 15\n        },\n        children: [_jsx(TextArea, {\n          children: _jsx(Text, {\n            children: \"\\uC774\\uB984\"\n          })\n        }), _jsx(InputArea, {\n          children: _jsx(Input, {\n            ref: nameRef,\n            value: name,\n            onChangeText: function onChangeText(text) {\n              return setName(text);\n            },\n            onSubmitEditing: function onSubmitEditing() {\n              emailRef.current.focus();\n              setName(name.trim());\n            },\n            placeholder: \"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            placeholderTextColor: \"gray\",\n            autoComplete: \"name\",\n            returnKeyType: \"next\",\n            autoFocus: true,\n            maxLength: 15\n          })\n        })]\n      }), _jsxs(MiddleContainer, {\n        children: [_jsx(TextArea, {\n          children: _jsx(Text, {\n            children: \"E mail\"\n          })\n        }), _jsx(InputArea, {\n          children: _jsx(Input, {\n            ref: emailRef,\n            value: email,\n            onChangeText: function onChangeText(text) {\n              setEmail(text);\n            },\n            onSubmitEditing: function onSubmitEditing() {\n              passwordRef.current.focus();\n            },\n            placeholder: \"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            placeholderTextColor: \"gray\",\n            autoComplete: \"email\",\n            returnKeyType: \"next\",\n            keyboardType: \"email-address\",\n            maxLength: 30\n          })\n        })]\n      }), _jsxs(MiddleContainer, {\n        children: [_jsx(TextArea, {\n          children: _jsx(Text, {\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n          })\n        }), _jsx(InputArea, {\n          children: _jsx(Input, {\n            ref: passwordRef,\n            value: password,\n            onChangeText: function onChangeText(text) {\n              setPassword(text);\n            },\n            onSubmitEditing: function onSubmitEditing() {\n              rePasswordRef.current.focus();\n            },\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            placeholderTextColor: \"gray\",\n            secureTextEntry: true,\n            autoComplete: \"password\",\n            returnKeyType: \"next\",\n            maxLength: 30\n          })\n        })]\n      }), _jsxs(MiddleContainer, {\n        children: [_jsx(TextArea, {\n          children: _jsx(Text, {\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"\n          })\n        }), _jsx(InputArea, {\n          children: _jsx(Input, {\n            ref: rePasswordRef,\n            value: rePassWord,\n            onChangeText: function onChangeText(text) {\n              setRePassWord(text);\n            },\n            onSubmitEditing: AlertSignup,\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uB2E4\\uC2DC \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            placeholderTextColor: \"gray\",\n            secureTextEntry: true,\n            autoComplete: \"password\",\n            returnKeyType: \"done\",\n            blurOnSubmit: true,\n            maxLength: 30\n          })\n        })]\n      }), errorMessage ? _jsx(MiddleContainer, {\n        children: _jsx(TextArea, {\n          children: _jsx(ErrorMessageText, {\n            children: errorMessage\n          })\n        })\n      }) : null, _jsx(SignupButtonContainer, {\n        children: _jsx(SignupButton, {\n          onPress: AlertSignup,\n          disabled: disabled,\n          children: _jsx(SignupButtonText, {\n            children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n          })\n        })\n      })]\n    })\n  });\n}","map":{"version":3,"sources":["/Users/yook/Programming/Mobile/AND1/src/screens/Signup.js"],"names":["React","useRef","useState","useEffect","styled","useDispatch","signup","signupName","ProgressAction","width","Dimensions","get","height","Container","SafeAreaView","theme","background","ScrollContainer","ScrollView","MiddleContainer","View","TextArea","Text","grayText","InputArea","emailPWInput","Input","TextInput","SignupButtonText","buttonTextSize","normalText","ErrorMessageText","normalTextSize","Singup","navigation","dispatch","name","setName","email","setEmail","password","setPassword","rePassWord","setRePassWord","disabled","setDisabled","errorMessage","setErrorMessage","nameRef","emailRef","passwordRef","rePasswordRef","_errorMessage","length","AlertSignup","Alert","alert","text","onPress","_Signup","cancelable","onDismiss","user","console","log","navigate","message","SignupButtonContainer","SignupButton","TouchableOpacity","button","marginTop","current","focus","trim"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport styled from \"styled-components/native\";\nimport { useDispatch } from \"react-redux\";\nimport { Alert, Dimensions } from \"react-native\";\nimport { signup, signupName } from \"../data/firebase\";\nimport { ProgressAction } from \"../actions/ProgressAction\";\n\nconst width = Dimensions.get(\"window\").width;\nconst height = Dimensions.get(\"window\").height;\n\nconst Container = styled.SafeAreaView`\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  background-color: ${({ theme }) => theme.background};\n`;\n\nconst ScrollContainer = styled.ScrollView`\n  flex: 1;\n  width: 100%;\n`;\n\nconst MiddleContainer = styled.View`\n  width: ${width}px\n  justify-content: center;\n  align-items: center;\n  margin: 3px;\n  margin-bottom: 5px\n`;\n\nconst TextArea = styled.View`\n  justify-content: center;\n  align-items: center;\n  width: 80%\n  height: 50px;\n  padding-left: 10px\n`;\n\nconst Text = styled.Text`\n  align-self: flex-start\n  font-size: 18px;\n  color: ${({ theme }) => theme.grayText};\n`;\n\nconst InputArea = styled.View`\n  width: 80%;\n  height: 50px;\n  background-color: ${({ theme }) => theme.emailPWInput};\n  opacity: 0.7\n  align-items: flex-start;\n  justify-content: center;\n  border-radius: 12px;\n`;\n\nconst Input = styled.TextInput`\n  color: black;\n  font-size: 15px;\n  height: 50px;\n  padding-left: 15px;\n  padding-right: 15px;\n  width: 100%;\n`;\n\nconst SignupButtonText = styled.Text`\n  font-size: ${({ theme }) => theme.buttonTextSize}\n  font-weight: bold\n  color: ${({ theme }) => theme.normalText};\n`;\n\nconst ErrorMessageText = styled.Text`\n  align-self: flex-start;\n  color: red;\n  font-size: ${({ theme }) => theme.normalTextSize};\n`;\n\nexport default function Singup({ navigation }) {\n  const dispatch = useDispatch();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [rePassWord, setRePassWord] = useState(\"\");\n  const [disabled, setDisabled] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const nameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n  const rePasswordRef = useRef();\n\n  useEffect(() => {\n    let _errorMessage = \"\";\n    if (!name) {\n      _errorMessage = \"이름을 입력하세요\";\n    } else if (!email) {\n      _errorMessage = \"이메일을 입력하세요\";\n    } else if (!password) {\n      _errorMessage = \"비밀번호를 입력하세요\";\n    } else if (password.length < 6) {\n      _errorMessage = \"비밀번호를 6자리 이상 입력하세요\";\n    } else if (password !== rePassWord) {\n      _errorMessage = \"비밀번호가 일치하지 않습니다\";\n    } else {\n      _errorMessage = null;\n    }\n    setErrorMessage(_errorMessage);\n  }, [name, email, password, rePassWord]);\n\n  useEffect(() => {\n    setDisabled(!(name && email && password && rePassWord && !errorMessage));\n  }, [name, email, password, rePassWord, errorMessage]);\n\n  function AlertSignup() {\n    Alert.alert(\n      \"알림\",\n      \"해당 정보로 회원가입 하시겠습니까?\",\n      [\n        { text: \"아니요\" },\n        {\n          text: \"네\",\n          onPress: _Signup,\n        },\n      ],\n      {\n        cancelable: true,\n        onDismiss: () =>\n          Alert.alert(\n            \"This alert was dismissed by tapping outside of the alert dialog.\"\n          ),\n      }\n    );\n  }\n\n  async function _Signup() {\n    try {\n      dispatch(ProgressAction(true));\n      const user = await signup(email, password, name);\n      console.log(\"Signup page: signup button clicked\");\n      navigation.navigate(\"EmailLogin\");\n      dispatch(ProgressAction(false));\n    } catch (e) {\n      dispatch(ProgressAction(false));\n      if (e.message == \"Firebase: Error (auth/email-already-in-use).\") {\n        Alert.alert(\n          \"이메일 오류\",\n          `이미 가입된 이메일입니다\\n다른 이메일으로 등록해 주시길 바랍니다`\n        );\n        console.log(`Signup page: signup failed reason: ${e.message}`);\n      } else {\n        Alert.alert(\"정보를 올바르게 입력해주세요\");\n        console.log(`Signup page: signup failed reason: ${e.message}`);\n      }\n    }\n  }\n\n  const SignupButtonContainer = styled.View`\n    width: ${width}px;\n    justify-content: center;\n    align-items: center;\n    margin-top: ${disabled ? height * 0.049 : height * 0.12}px;\n    margin-bottom: 15px;\n  `;\n\n  const SignupButton = styled.TouchableOpacity`\n    justify-content: center;\n    align-items: center;\n    width: 170px;\n    height: 50px;\n    background-color: ${({ theme }) => theme.button};\n    border-radius: 12px;\n    opacity: ${disabled ? \"0.25\" : \"1\"};\n  `;\n\n  return (\n    <Container>\n      <ScrollContainer>\n        <MiddleContainer style={{ marginTop: 15 }}>\n          <TextArea>\n            <Text>이름</Text>\n          </TextArea>\n          <InputArea>\n            <Input\n              ref={nameRef}\n              value={name}\n              onChangeText={(text) => setName(text)}\n              onSubmitEditing={() => {\n                emailRef.current.focus();\n                setName(name.trim());\n              }}\n              placeholder=\"이름을 입력하세요\"\n              placeholderTextColor=\"gray\"\n              autoComplete=\"name\"\n              returnKeyType=\"next\"\n              autoFocus={true}\n              maxLength={15}\n            />\n          </InputArea>\n        </MiddleContainer>\n        <MiddleContainer>\n          <TextArea>\n            <Text>E mail</Text>\n          </TextArea>\n          <InputArea>\n            <Input\n              ref={emailRef}\n              value={email}\n              onChangeText={(text) => {\n                setEmail(text);\n              }}\n              onSubmitEditing={() => {\n                passwordRef.current.focus();\n              }}\n              placeholder=\"이메일을 입력하세요\"\n              placeholderTextColor=\"gray\"\n              autoComplete=\"email\"\n              returnKeyType=\"next\"\n              keyboardType=\"email-address\"\n              maxLength={30}\n            />\n          </InputArea>\n        </MiddleContainer>\n        <MiddleContainer>\n          <TextArea>\n            <Text>비밀번호</Text>\n          </TextArea>\n          <InputArea>\n            <Input\n              ref={passwordRef}\n              value={password}\n              onChangeText={(text) => {\n                setPassword(text);\n              }}\n              onSubmitEditing={() => {\n                rePasswordRef.current.focus();\n              }}\n              placeholder=\"비밀번호를 입력하세요\"\n              placeholderTextColor=\"gray\"\n              secureTextEntry={true}\n              autoComplete=\"password\"\n              returnKeyType=\"next\"\n              maxLength={30}\n            />\n          </InputArea>\n        </MiddleContainer>\n        <MiddleContainer>\n          <TextArea>\n            <Text>비밀번호 확인</Text>\n          </TextArea>\n          <InputArea>\n            <Input\n              ref={rePasswordRef}\n              value={rePassWord}\n              onChangeText={(text) => {\n                setRePassWord(text);\n              }}\n              onSubmitEditing={AlertSignup}\n              placeholder=\"비밀번호를 다시 입력하세요\"\n              placeholderTextColor=\"gray\"\n              secureTextEntry={true}\n              autoComplete=\"password\"\n              returnKeyType=\"done\"\n              blurOnSubmit={true}\n              maxLength={30}\n            />\n          </InputArea>\n        </MiddleContainer>\n        {errorMessage ? (\n          <MiddleContainer>\n            <TextArea>\n              <ErrorMessageText>{errorMessage}</ErrorMessageText>\n            </TextArea>\n          </MiddleContainer>\n        ) : null}\n        <SignupButtonContainer>\n          <SignupButton onPress={AlertSignup} disabled={disabled}>\n            <SignupButtonText>회원가입</SignupButtonText>\n          </SignupButton>\n        </SignupButtonContainer>\n      </ScrollContainer>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}